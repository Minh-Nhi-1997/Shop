<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="utf-8">
    <title>Quên mật khẩu - CakeZone</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link
        href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Oswald:wght@500;600;700&family=Pacifico&display=swap"
        rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <style>
        .auth-card {
            max-width: 460px;
            margin: 110px auto;
        }

        .brand-logo {
            font-family: 'Oswald', sans-serif;
        }

        .step-container {
            display: none;
        }

        .step-container.active {
            display: block;
        }

        .progress-step {
            text-align: center;
            margin-bottom: 25px;
        }

        .step-indicator {
            display: inline-block;
            width: 40px;
            height: 40px;
            line-height: 40px;
            border-radius: 50%;
            background: #ddd;
            color: #333;
            font-weight: bold;
            margin: 0 5px;
        }

        .step-indicator.active {
            background: #fd7e14;
            color: white;
        }

        .step-indicator.done {
            background: #28a745;
            color: white;
        }
    </style>
</head>

<body class="bg-img">
    <nav class="navbar navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand text-white brand-logo" href="index.html"><i
                    class="fa fa-birthday-cake text-primary me-2"></i>CakeZone</a>
            <div><a class="nav-link d-inline text-white" href="login.html">Đăng nhập</a></div>
        </div>
    </nav>

    <div class="container auth-card">
        <div class="card border-inner">
            <div class="card-body p-4">
                <h3 class="mb-4 text-center">Đặt lại mật khẩu</h3>

                <!-- Step 1: Nhập Email -->
                <div id="step1" class="step-container active">
                    <div class="progress-step mb-4">
                        <span class="step-indicator active">1</span>
                        <span class="step-indicator">2</span>
                        <span class="step-indicator">3</span>
                    </div>
                    <p class="small text-center mb-3">Nhập email đã đăng ký để nhận mã xác nhận</p>
                    <form id="emailForm">
                        <div class="mb-3">
                            <label class="form-label">Email</label>
                            <input id="fpEmail" type="email" class="form-control" placeholder="you@example.com"
                                required>
                        </div>
                        <button type="submit" class="btn btn-primary w-100 border-inner">Tiếp tục</button>
                    </form>
                </div>

                <!-- Step 2: Nhập OTP -->
                <div id="step2" class="step-container">
                    <div class="progress-step mb-4">
                        <span class="step-indicator done">✓</span>
                        <span class="step-indicator active">2</span>
                        <span class="step-indicator">3</span>
                    </div>
                    <p class="small text-center mb-3">Mã xác nhận đã được gửi đến email của bạn</p>
                    <form id="otpForm">
                        <div class="mb-3">
                            <label class="form-label">Mã xác nhận (6 chữ số)</label>
                            <input id="fpOtp" type="text" class="form-control text-center" placeholder="000000"
                                maxlength="6" required>
                        </div>
                        <button type="submit" class="btn btn-primary w-100 border-inner">Xác nhận</button>
                    </form>
                    <p class="small text-center mt-3"><a href="#" id="resendOtp">Gửi lại mã</a></p>
                </div>

                <!-- Step 3: Đặt mật khẩu mới -->
                <div id="step3" class="step-container">
                    <div class="progress-step mb-4">
                        <span class="step-indicator done">✓</span>
                        <span class="step-indicator done">✓</span>
                        <span class="step-indicator active">3</span>
                    </div>
                    <p class="small text-center mb-3">Nhập mật khẩu mới của bạn</p>
                    <form id="newPasswordForm">
                        <div class="mb-3">
                            <label class="form-label">Mật khẩu mới</label>
                            <input id="newPass" type="password" class="form-control" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Xác nhận mật khẩu</label>
                            <input id="newPass2" type="password" class="form-control" required>
                        </div>
                        <button type="submit" class="btn btn-primary w-100 border-inner">Cập nhật mật khẩu</button>
                    </form>
                </div>

                <!-- Success -->
                <div id="stepSuccess" class="step-container text-center">
                    <div class="mb-4">
                        <i class="fas fa-check-circle text-success" style="font-size: 60px;"></i>
                    </div>
                    <h5 class="mb-3">Mật khẩu đã được cập nhật thành công!</h5>
                    <p class="small mb-3">Bạn có thể đăng nhập với mật khẩu mới</p>
                    <a href="login.html" class="btn btn-primary w-100 border-inner">Quay lại đăng nhập</a>
                </div>

                <div class="text-center mt-3">
                    <a href="login.html" class="small">Quay lại đăng nhập</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;

        function showStep(step) {
            document.querySelectorAll('.step-container').forEach(el => el.classList.remove('active'));
            document.getElementById('step' + step).classList.add('active');
            currentStep = step;
        }

        // Step 1: Email
        document.getElementById('emailForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const email = document.getElementById('fpEmail').value.trim();
            if (!email) {
                alert('Vui lòng nhập email.');
                return;
            }
            alert('Demo: Mã xác nhận đã được gửi đến ' + email);
            showStep(2);
        });

        // Step 2: OTP
        document.getElementById('otpForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const otp = document.getElementById('fpOtp').value.trim();
            if (!otp || otp.length !== 6) {
                alert('Vui lòng nhập mã 6 chữ số.');
                return;
            }
            alert('Demo: Mã xác nhận hợp lệ');
            showStep(3);
        });

        // Resend OTP
        document.getElementById('resendOtp').addEventListener('click', function(e) {
            e.preventDefault();
            alert('Demo: Mã xác nhận mới đã được gửi');
        });

        // Step 3: New Password
        document.getElementById('newPasswordForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const p1 = document.getElementById('newPass').value;
            const p2 = document.getElementById('newPass2').value;
            if (!p1 || !p2) {
                alert('Vui lòng nhập đầy đủ mật khẩu.');
                return;
            }
            if (p1 !== p2) {
                alert('Mật khẩu không khớp.');
                return;
            }
            alert('Demo: Mật khẩu đã được cập nhật');
            showStep('Success');
        });
    </script>
</body>

</html>